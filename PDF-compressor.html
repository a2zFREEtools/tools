<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF Compressor - Online Tool</title>
  <meta name="description" content="Free online PDF compressor tool. Reduce PDF size with adjustable compression levels. SEO-friendly with Adsterra integration.">
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:20px; text-align:center; background:#f9f9f9; }
    h1 { color:#333; }
    .container { max-width:600px; margin:0 auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
    input, select, button { margin:10px 0; padding:10px; width:100%; border-radius:5px; border:1px solid #ccc; }
    button { background:#007bff; color:#fff; border:none; cursor:pointer; }
    button:hover { background:#0056b3; }
    .ads { margin:20px 0; background:#eee; padding:10px; border-radius:5px; }
  </style>
  <!-- pdf-lib -->
  <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
</head>
<body>

  <div class="container">
    <h1>PDF Compressor</h1>
    <p>Select your PDF and choose a compression level</p>
    
    <input type="file" id="pdfUpload" accept="application/pdf">
    <select id="compressionLevel">
      <option value="0.9">Low (High Quality)</option>
      <option value="0.7">Medium</option>
      <option value="0.5">High Compression</option>
    </select>
    <button onclick="compressPDF()">Compress PDF</button>
    <br>
    <a id="downloadLink" style="display:none;" download="compressed.pdf">Download Compressed PDF</a>

    <!-- Adsterra ad space -->
    <div class="ads">
      <!-- Insert Adsterra Ad Code Here -->
      <p>Ad space</p>
    </div>
  </div>

<script>
async function compressPDF() {
  const fileInput = document.getElementById('pdfUpload');
  const compression = parseFloat(document.getElementById('compressionLevel').value);
  if (!fileInput.files.length) {
    alert("Please upload a PDF first.");
    return;
  }

  const file = fileInput.files[0];
  const arrayBuffer = await file.arrayBuffer();
  const pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);

  const pages = pdfDoc.getPages();

  for (let page of pages) {
    const { width, height } = page.getSize();
    const jpgImage = await pdfDoc.embedJpg(await page.renderToBuffer({ width: width*compression, height: height*compression }));
    page.drawImage(jpgImage, { x:0, y:0, width, height });
  }

  const compressedPdfBytes = await pdfDoc.save();
  const blob = new Blob([compressedPdfBytes], { type: "application/pdf" });
  
  const link = document.getElementById('downloadLink');
  link.href = URL.createObjectURL(blob);
  link.style.display = 'inline-block';
  link.innerText = "Download Compressed PDF";
}
</script>

</body>
</html>
